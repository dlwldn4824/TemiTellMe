# 로봇에서 앱 화면 보기 가이드

## 🚀 빠른 실행 가이드

### 1단계: 로봇 연결

로봇과 컴퓨터가 같은 네트워크에 연결되어 있어야 합니다.

```bash
# 로봇 IP 주소로 연결 (예: 10.200.57.107)
adb connect 10.200.57.107:5555

# 연결 확인
adb devices
```

출력 예시:
```
List of devices attached
10.200.57.107:5555	device
```

✅ **로봇이 보이면 성공!**

---

### 2단계: 개발 서버 확인

**프론트엔드 서버가 실행 중인지 확인:**

터미널에서 다음 명령어로 확인:
```bash
lsof -i :5173
```

실행 중이 아니면:
```bash
cd co-show
pnpm run dev
```

**백엔드 서버도 실행 중인지 확인:**

다른 터미널에서:
```bash
cd co-show/backend
npm run dev
```

---

### 3단계: 앱 실행

로봇이 연결되면:

```bash
adb shell am start -n com.example.coshowsample/.MainActivity
```

또는 **로봇 화면에서 직접 앱 아이콘을 터치**해도 됩니다.

---

### 4단계: 화면 확인

앱을 실행하면:
1. **WebView가 개발 서버를 로드합니다** (`http://10.200.57.108:5173`)
2. 웹 앱 화면이 로봇 화면에 표시됩니다
3. 잠시 로딩 시간이 있을 수 있습니다

---

## 🔍 문제 해결

### 문제 1: "adb: no devices/emulators found"

**원인**: 로봇이 연결되지 않음

**해결**:
1. 로봇과 컴퓨터가 같은 Wi-Fi에 연결되어 있는지 확인
2. 로봇 IP 주소 확인
3. 다시 연결:
   ```bash
   adb connect <로봇_IP>:5555
   ```

---

### 문제 2: 화면이 검은색이거나 로딩만 계속됨

**원인**: 개발 서버에 접근할 수 없음

**확인 사항**:
1. **개발 서버 실행 중인지 확인**
   ```bash
   ps aux | grep vite
   ```
   
2. **Vite 서버가 외부 접근 허용하는지 확인**
   - `vite.config.js`에 `server.host: "0.0.0.0"` 있는지 확인
   
3. **서버 재시작**
   ```bash
   cd co-show
   pnpm run dev
   ```
   
   출력에서 `Network: http://10.200.57.108:5173/` 주소 확인

4. **앱에서 사용하는 IP 주소 확인**
   - `MainActivity.java`의 `ENTRY_URL`이 올바른 IP인지 확인
   - 현재 설정: `http://10.200.57.108:5173`

---

### 문제 3: "ERR_CONNECTION_REFUSED" 또는 "네트워크 오류"

**원인**: 개발 PC 방화벽 또는 서버 미실행

**해결**:
1. 개발 서버가 실행 중인지 확인
2. 같은 네트워크인지 확인
3. IP 주소가 올바른지 확인

**IP 주소 확인 방법**:
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

출력된 IP를 `MainActivity.java`의 `ENTRY_URL`에 맞춰야 합니다.

---

### 문제 4: 앱이 실행되지 않음

**확인**:
1. 앱이 설치되었는지 확인:
   ```bash
   adb shell pm list packages | grep coshowsample
   ```
   
2. 다시 설치:
   ```bash
   cd co-show/android
   adb install -r app/build/outputs/apk/debug/app-debug.apk
   ```

---

## 📱 로봇에서 직접 실행하는 방법

1. **로봇 화면에서 홈 화면으로 이동**
2. **앱 목록에서 "co-show" 또는 "coshowsample" 찾기**
3. **앱 아이콘 터치**

---

## 🔧 로그 확인 (문제 디버깅용)

앱 실행 중 로그를 확인하려면:

```bash
# WebView 로그
adb logcat | grep -i "webview\|chromium"

# 앱 로그
adb logcat | grep -i "coshowsample\|MainActivity"

# WebSocket 로그
adb logcat | grep -i "TemiSocketManager"

# 모든 앱 로그
adb logcat | grep "com.example.coshowsample"
```

---

## ✅ 정상 작동 확인 체크리스트

- [ ] 로봇이 `adb devices`에 표시됨
- [ ] 프론트엔드 개발 서버 실행 중 (`pnpm run dev`)
- [ ] 백엔드 서버 실행 중 (`npm run dev`)
- [ ] `MainActivity.java`의 `ENTRY_URL`이 올바른 IP 주소
- [ ] 로봇 화면에 웹 앱 화면이 표시됨

---

## 💡 팁

### 개발 서버 주소 확인

개발 서버를 시작하면 터미널에 다음과 같이 표시됩니다:

```
VITE v5.x.x  ready in xxx ms

➜  Local:   http://localhost:5173/
➜  Network: http://10.200.57.108:5173/  ← 이 주소를 사용!
```

**`Network` 주소**가 로봇에서 접근할 수 있는 주소입니다.

### IP 주소가 바뀌었을 때

네트워크를 바꾸면 IP 주소가 변경될 수 있습니다. 다음 파일들의 IP 주소를 업데이트하세요:

1. `android/app/src/main/java/com/example/coshowsample/MainActivity.java`
   - `ENTRY_URL`
   - `socketManager.setServerUrl()`

2. `src/services/apiBase.js`
   - 안드로이드 환경의 `return` 값

---

## 🎯 다음 단계

화면이 정상적으로 보이면:
1. 웹 앱 기능 테스트
2. Temi SDK 기능 테스트 (이동, 말하기 등)
3. WebSocket 통신 확인
4. API 호출 확인



